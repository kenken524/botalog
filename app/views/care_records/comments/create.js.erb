// コメント一覧を更新
var carerecordcomments = document.getElementById('carerecord-comments');

<% if @carerecord.comments.any? && @carerecord.comments.last.errors.empty? %>
  // 最後のコメントがエラーがない場合にのみ追加
  if (carerecordcomments) {
    carerecordcomments.innerHTML += '<%= j(render partial: 'comments/comments', locals: { comments: [@carerecord.comments] }) %>';
  }

  // 画面を一番下にスクロール
  window.scrollTo(0, document.body.scrollHeight);
<% else %>
  // エラー時の処理
  console.error('コメントが保存されませんでした。');
<% end %>
